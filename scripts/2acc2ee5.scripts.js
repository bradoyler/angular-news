"use strict";angular.module("ngnewsApp",["ngCookies","ngResource","ngSanitize","ngRoute","angularMoment","angularShamSpinner","ui.bootstrap"]).config(["$routeProvider","$anchorScrollProvider","$locationProvider","$httpProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/article/:externalId",{templateUrl:"views/article.html",controller:"ArticleCtrl"}).when("/:sectionSlug",{templateUrl:"views/main.html",controller:"SectionCtrl"}).when("/:sectionSlug/:topicSlug",{templateUrl:"views/main.html",controller:"TopicCtrl"}).otherwise({redirectTo:"/"})}]);var apihost="http://newsapi-proxy.herokuapp.com/api";angular.module("ngnewsApp").controller("MainCtrl",["$scope","$http","$rootScope","$location",function(a,b,c,d){a.$path=d.path.bind(d),b({method:"GET",url:apihost+"/curatedcover"}).success(function(b){a.articles=b.results,c.coverRes=b}).error(function(){})}]),angular.module("ngnewsApp").controller("SectionCtrl",["$scope","$http","$routeParams","$rootScope","$location",function(a,b,c,d){b({method:"GET",url:apihost+"/entriesbysection?section="+c.sectionSlug}).success(function(b){a.articles=b.results,d.sectionRes=b}).error(function(){})}]),angular.module("ngnewsApp").controller("TopicCtrl",["$scope","$http","$routeParams","$rootScope","$location",function(a,b,c,d){b({method:"GET",url:apihost+"/entriesbytopic?topic="+c.topicSlug}).success(function(b){a.articles=b.results,d.sectionRes=b}).error(function(){})}]),angular.module("ngnewsApp").controller("ArticleCtrl",["$scope","$http","$routeParams","$rootScope","$filter","$anchorScroll",function(a,b,c,d,e,f){var g=null;d.coverRes&&(g=e("filter")(d.coverRes.results,{externalId:c.externalId})),g[0]?a.item=g[0]:b({method:"GET",url:apihost+"/entrybyid?articleId=NewsCms%2Fentry%2F"+c.externalId}).success(function(b){a.item=b.results[0]}).error(function(){}),f()}]),angular.module("ngnewsApp").directive("adaptiveImage",function(){return{restrict:"EAC",link:function(a,b,c){a.$watch(c.adaptiveImage,function(a){var c="520",d="240";"undefined"!=typeof a&&(a=a.toLowerCase().replace("/i/","/j/").replace(".jpg",".nbcnews-fp-"+c+"-"+d+".jpg").replace(".png",".nbcnews-fp-"+c+"-"+d+".png")),b.prop("src",a)})}}}),angular.module("ngnewsApp").directive("panelA",function(){return{templateUrl:"views/partials/panel-a.html"}}),angular.module("ngnewsApp").directive("loadingIndicator",function(){return{restrict:"A",template:"<div>Loading...</div>",link:function(a,b){a.$on("loading-started",function(){b.css({display:""})}),a.$on("loading-complete",function(){b.css({display:"none"})})}}}),angular.module("ngnewsApp").factory("Articles",function(){return[]});